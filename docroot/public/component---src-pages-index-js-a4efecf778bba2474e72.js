(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{RXBc:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return _}));a("rGqo"),a("yt8O"),a("Btvt"),a("hhXQ");var n=a("q1tI"),r=a.n(n),s=function(){return r.a.createElement("div",{className:"c-intro"},r.a.createElement("h1",{className:"c-intro__item c-intro__statement"},"Use this site to find songs with your name in the lyrics."),r.a.createElement("h2",{className:"c-intro__item c-intro__question"},"What's your name?"))},i=a("yBb5"),l=function(e){var t=e.label,a=e.className,n=e.disabled;return r.a.createElement("button",{className:a,type:"submit",disabled:n},t)};l.defaultProps={className:"c-button",disabled:!1,label:""};var o=l;function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var u=function(e){var t,a;function n(t){var a;return(a=e.call(this,t)||this).handleInputChange=function(e){var t=e.target.value,n=a.minSize;n=0===t.length?a.minSize:t.length+a.sizePad,a.setState({inputName:t,size:n}),t.length>0?a.setState({isFormValid:!0}):a.setState({isFormValid:!1})},a.handleResults=function(e){a.props.onResultsChange(e)},a.handleError=function(e){a.props.onResultsChange({})},a.handleSubmit=function(e){e.preventDefault(),a.handleSearch(),fetch("http://admin.findmysong.function-designing.co.uk/lyric-lookup/"+a.state.inputName).then((function(e){if(200===e.status)return e.json();console.log("Response status not 200. Status Code: "+e.status)})).then((function(e){return a.handleResults(e)})).catch((function(e){return a.handleError(e)}))},a.minSize=4,a.sizePad=1,a.handleResults=a.handleResults.bind(c(a)),a.handleError=a.handleError.bind(c(a)),a.handleSearch=a.handleSearch.bind(c(a)),a.state={inputName:"",isFormValid:!1,size:4,hasBeenSearched:!1},a}a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var s=n.prototype;return s.handleSearch=function(){this.props.onSearch()},s.getInputClassNames=function(){return this.state.isFormValid?"c-nameform__input":"c-nameform__input c-nameform__input--throb"},s.render=function(){return r.a.createElement("form",{method:"post",className:"c-nameform",onSubmit:this.handleSubmit},r.a.createElement("label",{className:"c-nameform__label"},"My name is",r.a.createElement("span",{className:"c-nameform__input-wrapper"},r.a.createElement("input",{className:this.getInputClassNames(),size:this.state.size,name:"inputName",onChange:this.handleInputChange,required:"required",type:"text",value:this.state.inputName}),","),r.a.createElement(o,{className:"c-button c-button--big-text c-button--no-left-pad c-button--disabled c-button--throb",disabled:!this.state.isFormValid,label:"find my song."})))},n}(r.a.Component);u.defaultProps={onResultsChange:null};var h=a("vrFN"),d=function(e){var t=e.title,a=e.artist,n=e.spotify_id;e.deezer;return r.a.createElement("tr",{className:"c-results-table__row"},r.a.createElement("td",{className:"c-results-table__row__field"},t),r.a.createElement("td",{className:"c-results-table__row__field"},a),r.a.createElement("td",{className:"c-results-table__row__field"},r.a.createElement("a",{href:"https://open.spotify.com/embed/track/"+n,target:"_blank",rel:"noopener noreferrer"},"Spotify")),r.a.createElement("td",{className:"c-results-table__row__field c-results-table__row__field--hidden"},"Deezer"))};d.defaultProps={siteTitle:"",artist:"",deezer:"",spotify_id:""};var m=d;var p=function(e){var t,a;function n(){return e.apply(this,arguments)||this}a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var s=n.prototype;return s.renderTableData=function(){return this.props.tracks.map((function(e,t){return r.a.createElement(m,{key:t,title:e.title,artist:e.artist,spotify_id:e.spotify_id})}))},s.render=function(){var e=this.props.tracks,t=this.props.hasBeenSearched;return this.props.isSearching?r.a.createElement("div",{className:"c-results__throbber"}):e&&e.length>0?r.a.createElement("table",{className:"c-results__table"},r.a.createElement("thead",{className:"c-results__table__head"},r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Artist"),r.a.createElement("th",null,"Spotify"),r.a.createElement("th",null,"Deezer"))),r.a.createElement("tbody",null,this.renderTableData())):t?r.a.createElement("p",{className:"c-results__no-results"},"Sorry, your name has inadequate cultural cache. Please get a different name."):null},n}(r.a.Component);function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var _=function(e){var t,a;function n(t){var a;return(a=e.call(this,t)||this).handleResultsChange=a.handleResultsChange.bind(f(a)),a.handleSearch=a.handleSearch.bind(f(a)),a.state={tracks:[],hasBeenSearched:!1,isSearching:!1},a}a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var l=n.prototype;return l.handleResultsChange=function(e){var t=Object.values(e),a=[];for(var n in t){var r=t[n];a.push({title:r.track.track_name,artist:r.track.artist_name,spotify_id:r.track.spotify_id})}this.setState({tracks:a,hasBeenSearched:!0,isSearching:!1})},l.handleSearch=function(){this.setState({isSearching:!0})},l.render=function(){return r.a.createElement(i.a,null,r.a.createElement(h.a,{title:"Home"}),r.a.createElement(s,null),r.a.createElement(u,{onResultsChange:this.handleResultsChange,onSearch:this.handleSearch}),r.a.createElement(p,{tracks:this.state.tracks,hasBeenSearched:this.state.hasBeenSearched,isSearching:this.state.isSearching}))},n}(r.a.Component)},UExd:function(e,t,a){var n=a("nh4g"),r=a("DVgA"),s=a("aCFj"),i=a("UqcF").f;e.exports=function(e){return function(t){for(var a,l=s(t),o=r(l),c=o.length,u=0,h=[];c>u;)a=o[u++],n&&!i.call(l,a)||h.push(e?[a,l[a]]:l[a]);return h}}},hhXQ:function(e,t,a){var n=a("XKFU"),r=a("UExd")(!1);n(n.S,"Object",{values:function(e){return r(e)}})}}]);
//# sourceMappingURL=component---src-pages-index-js-a4efecf778bba2474e72.js.map